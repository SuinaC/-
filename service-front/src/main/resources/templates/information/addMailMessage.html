<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <!-- START: Head-->
    <head>
        <meta charset="UTF-8">
        <title>邮件</title>
        <link rel="shortcut icon" href="dist/images/favicon.ico" th:href="@{/information/}"/>
        <meta name="viewport" content="width=device-width,initial-scale=1"> 

        <!-- START: Template CSS-->
        <link rel="stylesheet" href="dist/vendors/bootstrap/css/bootstrap.min.css" th:href="@{/information/vendors/bootstrap/css/bootstrap.min.css}">
        <link rel="stylesheet" href="dist/vendors/jquery-ui/jquery-ui.min.css" th:href="@{/information/vendors/jquery-ui/jquery-ui.min.css}">
        <link rel="stylesheet" href="dist/vendors/jquery-ui/jquery-ui.theme.min.css" th:href="@{/information/vendors/jquery-ui/jquery-ui.theme.min.css}">
        <link rel="stylesheet" href="dist/vendors/simple-line-icons/css/simple-line-icons.css" th:href="@{/information/vendors/simple-line-icons/css/simple-line-icons.css}">
        <link rel="stylesheet" href="dist/vendors/flags-icon/css/flag-icon.min.css" th:href="@{/information/vendors/flags-icon/css/flag-icon.min.css}">
        <link rel="stylesheet" href="dist/vendors/flag-select/css/flags.css" th:href="@{/information/vendors/flag-select/css/flags.css}">
        <link rel="stylesheet" href="dist/vendors/sweetalert/sweetalert.css"
              th:href="@{/information/vendors/sweetalert/sweetalert.css}">
        <link rel="stylesheet" href="assets/plugins/fontawesome/css/all.min.css"
        th:href="@{/information/css/style.css}">
        <link rel="stylesheet" href="assets/css/style.css" th:href="@{/information/css/all.min.css}">
        <link rel="stylesheet" href="assets/css/style.css" th:href="@{/information/css/fontawesome.min.css}">
        <!-- END Template CSS-->

        <!-- START: Custom CSS-->
        <link rel="stylesheet" href="dist/css/main.css" th:href="@{/information/css/main.css}">
        <link rel="stylesheet" href="dist/vendors/icofont/icofont.min.css" th:href="@{/information/vendors/icofont/icofont.min.css}">
        <!-- END: Custom CSS-->
    </head>
    <!-- END Head-->

    <!-- START: Body-->    
    <body id="main-container" class="default">
        <!-- START: Pre Loader-->
        <div class="se-pre-con">
            <img src="dist/images/logo.png" th:src="@{/information/images/logo.png}" alt="logo" width="23" class="img-fluid"/>
        </div>
        <!-- END: Pre Loader-->

        <!-- START: Header-->
        <div id="header-fix" class="header fixed-top">
            <nav class="navbar navbar-expand-lg  p-0">
                <div class="navbar-header h4 mb-0 align-self-center logo-bar text-center">
                    <a href="index.html" class="horizontal-logo text-center">
                        <span class="h3 align-self-center mb-0 ">用户主页</span>
                    </a>
                </div>
                <div class="navbar-header h4 mb-0 text-center h-100 collapse-menu-bar">
                    <a href="#" class="sidebarCollapse" id="collapse"><i class="icon-menu body-color"></i></a>
                </div>

                <form class="float-left d-none d-lg-block search-form">
                    <div class="form-group mb-0 position-relative">
                        <input type="text" class="form-control border-0 rounded bg-search pl-5" id="searchDisease" th:onblur="'javascript:searchDisease('+${tConsumer.id}+')'" placeholder="请输入病症">
                        <div class="btn-search position-absolute top-0">
                            <a th:onclick="'javascript:searchDisease('+${tConsumer.id}+')'" ><i class="h5 icon-magnifier body-color"></i></a>
                        </div>
                        <a href="#" class="position-absolute close-button mobilesearch d-lg-none" data-toggle="dropdown" aria-expanded="false"><i class="icon-close h5"></i>
                        </a>

                    </div>
                </form>
                <div class="navbar-right ml-auto h-100">
                    <ul class="ml-auto p-0 m-0 list-unstyled d-flex top-icon h-100">
                        <li class="d-inline-block align-self-center  d-block d-lg-none">
                            <a href="#" class="nav-link mobilesearch" data-toggle="dropdown" aria-expanded="false"><i class="icon-magnifier h4"></i>
                            </a>
                        </li>
                        <li class="dropdown user-profile align-self-center d-inline-block">
                            <a href="#" class="nav-link py-0" data-toggle="dropdown" aria-expanded="false">
                                <div class="media">
                                    <img src="dist/images/author.jpg" th:src="@{${tConsumer.img}}" alt="" class="d-flex img-fluid rounded-circle" width="29">
                                </div>
                            </a>

                            <div class="dropdown-menu  dropdown-menu-right p-0">
                                <a th:href="@{/consumerInformation/updateInformation(id=${tConsumer.id})}" class="dropdown-item px-2 align-self-center d-flex">
                                    <span class="icon-pencil mr-2 h6 mb-0"></span> 编辑个人资料</a>
                                <a th:href="@{/consumerInformation/information(id=${tConsumer.id})}" class="dropdown-item px-2 align-self-center d-flex">
                                    <span class="icon-user mr-2 h6 mb-0"></span> 查看资料</a>
                                <div class="dropdown-divider"></div>

                                <div class="dropdown-divider"></div>
                                <a href="/consumer/login" class="dropdown-item px-2 text-danger align-self-center d-flex">
                                    <span class="icon-logout mr-2 h6  mb-0"></span>登出</a>
                            </div>

                        </li>

                    </ul>
                </div>
            </nav>
        </div>
        <!-- END: Header-->

        <!-- START: Main Menu-->
        <div class="sidebar">
            <div class="media d-block text-center user-profile">
                <img class="img-fluid" src="dist/images/author1.jpg" style="width: 100px; hight:100px" th:src="@{${tConsumer.img}}" alt="">
                <div class="media-body text-center mt-0 color-primary mt-2">
                    <a href="#" class="nav-link py-0" data-toggle="dropdown" aria-expanded="false">
                        <h6 class="mb-0 font-weight-bold" th:text="${tConsumer.name}">姓名</h6>
                        <p th:text="${tConsumer.nativePlace}"></p>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right p-0" style="">
                        <a th:href="@{/consumerInformation/updateInformation(id=${tConsumer.id})}" class="dropdown-item px-2 align-self-center d-flex">
                            <span class="icon-pencil mr-2 h6 mb-0"></span> 编辑个人资料</a>
                        <a th:href="@{/consumerInformation/information(id=${tConsumer.id})}" class="dropdown-item px-2 align-self-center d-flex">
                            <span class="icon-user mr-2 h6 mb-0"></span> 查看资料</a>
                        <div class="dropdown-divider"></div>

                        <div class="dropdown-divider"></div>
                        <a href="/consumer/login" class="dropdown-item px-2 text-danger align-self-center d-flex">
                            <span class="icon-logout mr-2 h6  mb-0"></span> 登出</a>
                    </div>
                </div>
            </div>

            <!-- START: Menu-->
            <ul id="side-menu" class="sidebar-menu">
                <li class="dropdown active"><a href="#">首页</a>
                    <ul>
                        <li class="active"><a href="index.html" th:href="@{/consumerInformation/index(id=${tConsumer.id})}"><i class="icon-rocket"></i> 首页</a></li>
                    </ul>
                </li>
                <li class="dropdown"><a href="#">应用</a>
                    <ul>
                        <li><a th:href="@{/consumerInformation/calendar(id=${tConsumer.id})}"><i class="icon-calendar"></i> 日历备忘录</a></li>

                        <li class="dropdown"><a href="#"><i class="icon-envelope"></i>邮箱</a>
                            <ul class="sub-menu">
                                <li><a th:href="@{/mailInbox/mail(id=${tConsumer.id})}"><i class="icon-envelope"></i> 收件箱</a></li>
                            </ul>
                        </li>
                        <li><a th:href="@{/consumerOrder/consumerOrder(id=${tConsumer.id})}"><i class="icon icofont-ui-copy"></i> 预约</a></li>
                        <li><a th:href="@{/consumerOrder/medicalOrder(id=${tConsumer.id})}"><i class="icon icofont-first-aid"></i> 体检预约</a></li>
                        <li><a th:href="@{/consumerInformation/prescriptionList(id=${tConsumer.id})}"><i class="icon icofont-ui-clip-board"></i> 查看处方</a></li>
                        <li><a th:href="@{/consumerInformation/searchDoctor(id=${tConsumer.id})}"><i class="icon icofont-doctor"></i> 查找医生</a></li>
                       <li><a th:href="@{/consumerInformation/doctorCollection(id=${tConsumer.id})}"><i class="icon icofont-heart"></i> 医生收藏</a></li>
                        <li><a th:href="@{/drug/drugOrderList(id=${tConsumer.id})}"><i class="icon icofont-ticket"></i> 查看药品订单列表</a></li>
                    </ul>
                </li>
                <li class="dropdown"><a href="#">信息</a>
                    <ul>
                        <li class="dropdown"><a href="#"><i class="icon-user"></i>个人信息</a>
                            <ul class="sub-menu">
                                <li><a th:href="@{/consumerInformation/information(id=${tConsumer.id})}"><i class="icon-disc"></i> 查看个人信息</a></li>
                                <li><a th:href="@{/consumerInformation/updateInformation(id=${tConsumer.id})}"><i class="icon-disc"></i> 修改个人信息</a></li>
                                <li><a th:href="@{/consumerInformation/updatePassword(id=${tConsumer.id})}"><i class="icon-disc"></i> 修改密码</a></li>
                            </ul>
                        </li>
                        <li class="dropdown"><a href="#"><i class="icon-paper-clip"></i>病历</a>
                            <ul class="sub-menu">
                                <li><a th:href="@{/consumerInformation/medical(id=${tConsumer.id})}"><i class="icon-disc"></i>历史病历</a></li>
                                <li><a th:href="@{/consumerInformation/existingMedical(id=${tConsumer.id})}"><i class="icon-cursor-move"></i>现有病历</a></li>
                            </ul>
                        </li>
                        <li class="dropdown"><a href="#"><i class="icon icofont-restaurant-menu"></i>预约信息</a>
                            <ul class="sub-menu">
                               <li><a th:href="@{/consumerOrder/appointmentProgress(id=${tConsumer.id})}"><i class="icon-disc"></i> 预约进度</a></li>
                                <li><a th:href="@{/consumerInformation/consumerOrderList(id=${tConsumer.id})}"><i class="icon-disc"></i> 预约列表</a></li>
                        <li><a th:href="@{/consumerOrder/medicalAppointmentList(id=${tConsumer.id})}"><i class="icon-disc"></i> 体检预约列表</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
            <!-- END: Menu-->
        </div>
        <!-- END: Main Menu-->

        <!-- START: Main Content-->
        <main>
            <!-- START: Card Data-->
            <div class="row">
                <div class="col-12 col-lg-3 col-xl-2 mb-4 mt-3 pr-lg-0">
                    <div class="card border h-100">
                        <div class="media d-block  d-flex p-3 bg-primary">
                            <a href="#"><img th:src="${tConsumer.img}" alt="" class="img-fluid rounded-circle mr-3" width="50"></a>
                            <div class="media-body align-self-center">
                                <h5 class="mb-0 w-100"><a  class="text-white">[[${tConsumer.name}]]</a></h5>
                                <small><a class="text-white">[[${tConsumer.email}]]</a></small>
                            </div>
                        </div>
                        <ul class="list-unstyled inbox-nav  mb-0 py-4">
                            <li><a th:href="@{/mailInbox/mail(id=${tConsumer.id})}" class="h6 d-block px-3 my-3"><i class="icon-envelope pr-2"></i> 收信箱</a></li>
                            <li><a th:href="@{/mailInbox/sendMail(id=${tConsumer.id})}" class="h6 d-block px-3  my-3"><i class="icon-paper-plane pr-2"></i> 发邮件</a></li>
                        </ul>
                        <div class="eagle-divider"></div>
                    </div>
                </div>
                <div class="col-12 col-lg-9 col-xl-10 mb-4 mt-3 pl-lg-0">
                    <div class="card border border-left-0 h-100">
                        <div class="card-body p-0">
                            <div >
                                <input hidden="hidden" id="consumerId" th:value="${tConsumer.id}">
                                <h3>您还没有添加邮箱验证信息，请按下面的步骤执行对应的操作</h3>
                            </div>
                            <div class="col-12 col-md-12 mt-3">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="wizard-tab ">
                                            <ul class="nav nav-tabs d-block d-sm-flex">
                                                <li class="nav-item mr-auto ">
                                                    <a class="nav-link p-0 active" style="border: none;" data-toggle="tab" href="#tab1">
                                                        <div class="d-flex">
                                                            <div class="mr-3 mb-0 h1">1</div>
                                                            <div class="media-body align-self-center">
                                                                <h6 class="mb-0 text-uppercase font-weight-bold">QQ邮箱</h6>
                                                                QQ邮箱验证信息获取过程
                                                            </div>
                                                        </div>

                                                    </a>
                                                </li>
                                                <li class="nav-item mr-auto ">
                                                    <a class="nav-link p-0"  style="border: none;" data-toggle="tab" href="#tab2">
                                                        <div class="d-flex">
                                                            <div class="mr-3 mb-0 h1">2</div>
                                                            <div class="media-body align-self-center">
                                                                <h6 class="mb-0 text-uppercase font-weight-bold">163邮箱</h6>
                                                                163邮箱验证信息获取过程
                                                            </div>
                                                        </div>
                                                    </a>
                                                </li>

                                                <li class="nav-item ">
                                                    <a class="nav-link p-0" style="border: none;" data-toggle="tab" href="#tab3">
                                                        <div class="d-flex">
                                                            <div class="mr-3 h1 mb-0">3</div>
                                                            <div class="media-body align-self-center">
                                                                <h6 class="mb-0 text-uppercase font-weight-bold">验证信息</h6>
                                                                请输入对应邮箱账号及其验证信息
                                                            </div>
                                                        </div>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="tab-content">
                                            <div class="tab-pane fade active show" id="tab1">
                                                <div class="form">
                                                    <p>第一步，打开邮箱设置</p>
                                                    <img style="width: 60%" th:src="@{/mail/1.png}">
                                                    <p>第二步，点击账户</p>
                                                    <img style="width: 60%" th:src="@{/mail/2.png}">
                                                    <p>第三步，往下翻找到POP3服务</p>
                                                    <img style="width: 60%" th:src="@{/mail/3.png}">
                                                    <p>第四步，点击开启</p>
                                                    <img style="width: 60%" th:src="@{/mail/3.png}">
                                                    <p>第五步，按要求发送短信</p>
                                                    <img style="width: 60%" th:src="@{/mail/4.png}">
                                                    <p>第六步，复制出现的授权码，粘贴在之后的步骤中</p>
                                                    <img style="width: 60%" th:src="@{/mail/5.png}">
                                                    <div class="form-group">
                                                        <button type="button" class="btn float-right btn-primary nexttab">下一步</button>
                                                    </div>


                                                </div>
                                            </div>
                                            <div class="tab-pane fade" id="tab2">
                                                <div class="form">
                                                    <p>第一步，打开邮箱设置，POP3/SMTP/IMAP</p>
                                                    <img style="width: 60%" th:src="@{/mail/6.png}">
                                                    <p>第二步，开启pop3服务</p>
                                                    <img style="width: 60%" th:src="@{/mail/7.png}">
                                                    <p>第三步，点击继续</p>
                                                    <img style="width: 60%" th:src="@{/mail/8.png}">
                                                    <p>第四步，按要求发送短信</p>
                                                    <img style="width: 60%" th:src="@{/mail/9.png}">
                                                    <p>第五步，复制出现的授权码，粘贴在之后的步骤中</p>
                                                    <img style="width: 60%" th:src="@{/mail/10.png}">
                                                    <div class="form-group">
                                                        <button type="button" class="btn btn-primary prevtab">上一步</button>
                                                        <button type="button" class="btn btn-primary nexttab ml-auto">下一步</button>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="tab-pane fade" id="tab3">
                                                <div class="form p-5 text-center">
                                                    <div class="form-group">
                                                        <label class=" ">邮箱地址</label>
                                                        <input type="email" id="email" class="form-control bg-transparent" placeholder="">
                                                        <small class="form-text">请输入邮箱地址</small>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class=" ">授权码</label>
                                                        <input type="password" id="password" class="form-control bg-transparent" placeholder="">
                                                        <small class="form-text">请输入授权码，当邮箱密码更改后，授权码会重置.</small>
                                                    </div>
                                                    <div class="d-flex">
                                                        <button type="button" class="btn btn-primary prevtab">上一步</button>
                                                        <button type="button" class="btn btn-primary ml-auto" onclick="addMailMessage()">提交</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- END: Card DATA-->
        </main>
        <!-- END: Content-->

        

        <!-- START: Back to top-->
        <a href="#" class="scrollup text-center"> 
            <i class="icon-arrow-up"></i>
        </a>
        <!-- END: Back to top-->

        <!-- START: Template JS-->
        <script src="dist/vendors/jquery/jquery-3.3.1.min.js" th:src="@{/information/vendors/jquery/jquery-3.3.1.min.js}"></script>
        <script src="dist/vendors/jquery-ui/jquery-ui.min.js" th:src="@{/information/vendors/jquery-ui/jquery-ui.min.js}"></script>
        <script src="dist/vendors/moment/moment.js" th:src="@{/information/vendors/moment/moment.js}"></script>
        <script src="dist/vendors/bootstrap/js/bootstrap.bundle.min.js" th:src="@{/information/vendors/bootstrap/js/bootstrap.bundle.min.js}"></script>
        <script src="dist/vendors/slimscroll/jquery.slimscroll.min.js" th:src="@{/information/vendors/slimscroll/jquery.slimscroll.min.js}"></script>
        <script src="dist/vendors/flag-select/js/jquery.flagstrap.min.js" th:src="@{/information/vendors/flag-select/js/jquery.flagstrap.min.js}"></script>
        <script src="dist/vendors/sweetalert/sweetalert.min.js" th:src="@{/information/vendors/sweetalert/sweetalert.min.js}"></script>
        <!-- END: Template JS-->
        <!-- END: Template JS-->

        <!-- START: APP JS-->
        <script src="dist/js/app.js" th:src="@{/information/js/app.js}"></script>
        <!-- END: APP JS-->
        <script type="text/javascript">
            function addMailMessage(){
                var email = $("#email").val();
                var password = $("#password").val();
                var consumerId = $("#consumerId").val();
                if(email == "" || password == ""){
                    swal({
                        title: "提示",
                        text: "邮箱和授权码不能为空",
                        type: "error",
                        showLoaderOnConfirm: '确定'
                    },function (){
                    });
                }else {
                    $.post(
                        "/mailInbox/addMailMessage",
                        "email=" + email + "&password=" + password + "&consumerId=" + consumerId,
                        function (data){
                            var da = data.split(":");
                            if(da[0] == "success"){
                                swal({
                                    title: "提示",
                                    text: "邮箱授权码设置成功",
                                    type: "success",
                                    showLoaderOnConfirm: '确定'
                                },function (){
                                    location.href="/mailInbox/mail?id=" + da[1];
                                });
                            }else {
                                swal({
                                    title: "提示",
                                    text: "邮箱授权码设置失败，请重试",
                                    type: "error",
                                    showLoaderOnConfirm: '确定'
                                },function (){
                                    location.href="/mailInbox/mail?id=" + da[1];
                                });
                            }
                        }
                    )
                }
            }
        </script>
    </body>
    <!-- END: Body-->
</html>
